<!DOCTYPE html>
<html lang="ko" class="no-js">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Diablo Immortal</title>
		<link rel="stylesheet" type="text/css" href="../styles/common.css" />
		<link rel="stylesheet" type="text/css" href="../styles/home_01.css" />
		
	</head>
	<body>
	
<!-- SCROLL CONTAINER -->
  
<div class="smooth-scroll">
  
    <div class="section-wrapper" data-scroll-section>
      
     <section id="sectionPin">      
       <div class="pin-wrap">

        <div class="header">
          <div class="logo-box">
            <img src="../img/logo_header.png">
          </div>
          <img src="../img/header_download.png" class="header-download"> 
        </div>

        <div class="hero-wrap" id="hero-cover-1">
              
        </div>

        <div class="hero-con-wrap">
            <div class="headline-wrap">
                <div class="marquee">
                    <div class="track">
                        <span class="text -r">어디서나 ONE하면 Diablo한다.</span>
                        <span class="text -r">어디서나 ONE하면 Diablo한다.</span>
                    </div>
                </div>
                
                <div class="marquee">
                    <div class="track">
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                    </div>
                </div>
                
                <div class="marquee">
                    <div class="track">
                        <span class="text -r">어디서나 ONE하면 Diablo한다.</span>
                        <span class="text -r">어디서나 ONE하면 Diablo한다.</span>
                    </div>
                </div>
                
                <div class="marquee">
                    <div class="track">
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                        <span class="text -twox">Diablo<span class="-green">Immortal</span><img src="../img/phone_small.png" /></span>
                    </div>
                </div>
                
                <div class="marquee">
                    <div class="track">
                        <span class="text -r">어디서나 ONE하면 Diablo한다.</span>
                        <span class="text -r">어디서나 ONE하면 Diablo한다.</span>
                    </div>
                </div>
            </div>
            
            <div class="phone-box">
                <div class="video-wrap">
                    <video src="../video/play_preview.mp4" muted autoplay loop></video>
                </div>
            </div>
        
        </div>

      </div>
    </section>
    
    <section class="section" id="section-test-1">

    </section>

    <section class="section" id="section-test-2">

    </section>

    <section class="section" id="section-test-1">

    </section>

    <section class="section section-grid">
        <img src="../img/grid_sample.png" class="grid-sample">
    </section>

    <section class="section section-features">
        <div class="features-pin-wrap">
            <div class="card-wrap"></div>
            <div class="card-wrap"></div>
            <div class="card-wrap"></div>
            <div class="card-wrap"></div>
        </div>
    </section>

    <section class="section gallery-wrap sample">

    </section>
    

    
  </div><!-- section wrapper -->
  </div> <!--smooth scroll-->

<link rel="stylesheet" type="text/css" href="../js/locomotive-scroll/locomotive-scroll.min.css" />

<script src="../js/jquery/jquery-3.4.1.min.js"></script>
<script src="../js/locomotive-scroll/locomotive-scroll.min.js"></script>
<script src="../js/gsap/gsap.min.js"></script>
<script src="../js/gsap/ScrollTrigger.min.js"></script>
		
		
<script>

    gsap.registerPlugin(ScrollTrigger);

    const locoScroll = new LocomotiveScroll({
    el: document.querySelector(".smooth-scroll"),
    smooth: true
    });
    locoScroll.on("scroll", ScrollTrigger.update);

    ScrollTrigger.scrollerProxy(".smooth-scroll", {
    scrollTop(value) {
        return arguments.length ? locoScroll.scrollTo(value, 0, 0) : locoScroll.scroll.instance.scroll.y;
    },
    getBoundingClientRect() {
        return {top: 0, left: 0, width: window.innerWidth, height: window.innerHeight};
    }
    });

    //----------------
    var pinBoxes = $('.hero-wrap');
    var pinBoxWidth = $(window).innerHeight()*0.85185;
    var exWrapWidth = $('.hero-wrap').width();
    var featureCardWidth = $('.card-wrap').height() * 0.85;
    var featurePinWidth = featureCardWidth * 4 + (140*5);

    var horizontalScrollLength = pinBoxWidth + $('.hero-con-wrap').width() + $('.header').width() - $(window).innerWidth();

    let featureCards = document.querySelectorAll('.card-wrap');
    let featureCardsWrap = document.querySelector('.features-pin-wrap');
    let featureCardsWrapWidth = featureCardWidth * 4 + (140*5)- $(window).innerWidth();
    function initCards(){
        for(var i =0; i<featureCards.length; i++){
            featureCards[i].style.width = featureCardWidth + 'px';
        }
        featureCardsWrap.style.width = featureCardWidth * 4 + (140*5) +'px';
    };
    initCards();

    gsap.to(".pin-wrap", {
    scrollTrigger: {
        scroller: ".smooth-scroll",
        scrub: true,
        trigger: "#sectionPin",
        pin: "#sectionPin",
        start: "top top",
        end: horizontalScrollLength
    }, 
    x: -horizontalScrollLength,
    ease: "none"
    });

    gsap.to(".features-pin-wrap", {
    scrollTrigger: {
        scroller: ".smooth-scroll",
        scrub: true,
        trigger: ".section-features",
        pin: ".section-features",
        start: "top top",
        end: featureCardsWrap.style.width
    }, 
    x: -featureCardsWrapWidth,
    ease: "none"
    });

    ScrollTrigger.addEventListener("refresh", () => locoScroll.update());
    ScrollTrigger.refresh();
			
</script>
		
		
	</body>
</html>
